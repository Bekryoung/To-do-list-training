<!DOCTYPE html>

<html>

  <head>

    <title>
      To-Do List page 3
    </title>

    <style>
      /* CSS영역 추가 */
    </style>

  </head>

  <body>

    <header>
      <div>
        <h1>To-Do List 3</h1>
      </div>
      <input onkeyup="enterInput();" type="text" id="write_box" placeholder="Write Here">
      <input onclick="newElement();" type="button" id="write_button" value="Write">
      <input onclick="clearElement();" type="button" id="clear_button" value="clear">
    </header>

    <hr />

    <div id="list_area">
      <ul id="td_lists">
      </ul>
    </div>

    <hr />

    <footer><small>This page is builded by <a href="mailto:bekryoung@gmail.com">FlowerDog</a></small></footer>

  </body>

  <script>
    var tdl = document.querySelector('#td_lists');
    getValues();

    function newElement() {
      var li = document.createElement('li');
      var inputValue = document.getElementById('write_box').value;
      var t = document.createTextNode(inputValue);
      li.appendChild(t);
      if (inputValue === '') {
        alert('You must write something!');
      } else {
        tdl.appendChild(li);
      }
      document.getElementById('write_box').value = '';
      var span = document.createElement('button');
      var txt = document.createTextNode('\u00D7');
      span.className = 'close';
      span.appendChild(txt);
      li.appendChild(span);
      span.onclick = function () {
        var div = this.parentElement;
        div.parentElement.removeChild(div);
        store();
      }

      store();

    }

    function enterInput() {
      if (window.event.keyCode === 13) {
        newElement();
      }
    }

    function del() {
      var close = document.getElementsByClassName('close');
      var i;
      for (i = 0; i < close.length; i++) {
        close[i].onclick = function () {
          var div = this.parentElement;
          div.parentElement.removeChild(div);
          store();
        }
      }
    }

    function store() {
      window.localStorage.setItem('tdlsave', tdl.innerHTML);
    }

    function getValues() {
      var storedValues = window.localStorage.getItem('tdlsave');
      if (!storedValues) {
        tdl.innerHTML = '';
      } else {
        tdl.innerHTML = storedValues;
      }
      del();
    }

    function clearElement() {
      window.localStorage.clear();
      getValues();
    }

  </script>

</html>
